!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}n(6),n(7),n(8),n(1),n(2);var i=n(9),a=o(i);new a.default,$(window).resize(function(){$(document).trigger("win:resizeStart"),this.resizeTO&&clearTimeout(this.resizeTO),this.resizeTO=setTimeout(function(){$(document).trigger("win:resizeEnd")},500)});var r=function(e,t){function n(t,n){requestAnimationFrame(function(){e.apply(t,n),o=0})}var o=void 0;return function(){o||(o=setTimeout(n,t,this,arguments))}},s=function(){$(window).trigger("scrolling")};$(window).on("scroll",r(s,300))},function(e,t){"use strict";var n=$(document);n.on("ga:ready",function(){n.on("ga:dimension",function(){var e=window.is_admin;window.dataLayer.push({event:"gtm-param","gtm-param-name":"dimension","gtm-param-number":1,"gtm-param-label":1===e?"traffic_by_admin_1":"traffic_by_admin_0","gtm-event-non-interaction":!0})}),n.on("ga:pageview",function(){window.dataLayer.push({event:"gtm-ga-event","gtm-event-category":"pageview","gtm-event-action":"pageview","gtm-event-label":document.location.pathname,"gtm-event-non-interaction":!1})}),n.on("ga:menu:click",function(e,t){window.dataLayer.push({event:"gtm-ga-event","gtm-event-category":"menu","gtm-event-action":"click","gtm-event-label":$(t).data("alias")||$(t).text(),"gtm-event-non-interaction":!1}),window.dataLayer.push({event:"gtm-ym-event","gtm-event-category":"","gtm-event-action":"","gtm-event-label":$(t).data("yacounter"),"gtm-event-non-interaction":!1})}),$("html").on("click",".js-menu-socials [data-yacounter]",function(){window.dataLayer.push({event:"gtm-ga-event","gtm-event-category":"menu","gtm-event-action":"click","gtm-event-label":$(this).data("yacounter"),"gtm-event-non-interaction":!1}),window.dataLayer.push({event:"gtm-ym-event","gtm-event-category":"","gtm-event-action":"","gtm-event-label":"bottom_click_"+$(this).data("yacounter"),"gtm-event-non-interaction":!1})}),$("html").on("click",".js-new-project-btn",function(){window.dataLayer.push({event:"gtm-ga-event","gtm-event-category":"new_project","gtm-event-action":"click","gtm-event-label":"","gtm-event-non-interaction":!1}),window.dataLayer.push({event:"gtm-ym-event","gtm-event-category":"","gtm-event-action":"","gtm-event-label":"new_project_click","gtm-event-non-interaction":!1})}),n.on("ga:accordeon:open",function(e,t){window.dataLayer.push({event:"gtm-ga-event","gtm-event-category":"about_projects","gtm-event-action":"click","gtm-event-label":$(t).find(".accordion-title").text(),"gtm-event-non-interaction":!1}),window.dataLayer.push({event:"gtm-ym-event","gtm-event-category":"","gtm-event-action":"","gtm-event-label":$(t).data("yacounter"),"gtm-event-non-interaction":!1})}),n.on("ga:aboutlogofilter:click",function(e,t){window.dataLayer.push({event:"gtm-ga-event","gtm-event-category":"client_groups","gtm-event-action":"click","gtm-event-label":$(t).text(),"gtm-event-non-interaction":!1}),window.dataLayer.push({event:"gtm-ym-event","gtm-event-category":"","gtm-event-action":"","gtm-event-label":$(t).data("yacounter"),"gtm-event-non-interaction":!1})}),$("html").on("click",".portfolio-nav .js-nav-link, .portfolio-tags .js-nav-link",function(){window.dataLayer.push({event:"gtm-ga-event","gtm-event-category":"filter_projects","gtm-event-action":"click","gtm-event-label":$(this).text(),"gtm-event-non-interaction":!1}),window.dataLayer.push({event:"gtm-ym-event","gtm-event-category":"","gtm-event-action":"","gtm-event-label":$(this).data("yacounter"),"gtm-event-non-interaction":!1})}),$("html").on("click",".js-page.contacts a[data-yacounter]",function(){window.dataLayer.push({event:"gtm-ga-event","gtm-event-category":$(this).data("yacounter"),"gtm-event-action":"click","gtm-event-label":"","gtm-event-non-interaction":!1})}),$("html").on("focus",".new-project-form input, .new-project-form textarea",function(){window.dataLayer.push({event:"gtm-ga-event","gtm-event-category":"contact_form","gtm-event-action":"focus","gtm-event-label":$(this).attr("name"),"gtm-event-non-interaction":!1}),window.dataLayer.push({event:"gtm-ym-event","gtm-event-category":"","gtm-event-action":"","gtm-event-label":"focus_form_contact","gtm-event-non-interaction":!1})}),$("html").on("click",".js-download-brief",function(){window.dataLayer.push({event:"gtm-ga-event","gtm-event-category":"contact_form","gtm-event-action":"click","gtm-event-label":$(this).data("yacounter"),"gtm-event-non-interaction":!1})}),n.on("ga:newproject:send",function(){window.dataLayer.push({event:"gtm-ga-event","gtm-event-category":"contact_form","gtm-event-action":"send","gtm-event-label":"","gtm-event-non-interaction":!1}),window.dataLayer.push({event:"gtm-ym-event","gtm-event-category":"","gtm-event-action":"","gtm-event-label":"send_form_contact","gtm-event-non-interaction":!1})}),$("html").on("click",".portfolio-item > a",function(){var e=$(this).index(".portfolio-item > a")+1,t=$(this).data("project");window.dataLayer.push({event:"gtm-ga-event","gtm-event-category":"project_external_link","gtm-event-action":e,"gtm-event-label":t,"gtm-event-value":e,"gtm-event-non-interaction":!1}),window.dataLayer.push({event:"gtm-ym-event","gtm-event-category":"","gtm-event-action":"","gtm-event-label":"project_click_external","gtm-event-non-interaction":!1})}),n.on("ga:portfolio:seen",function(e,t){var n=$(t).closest("[data-project]").index(".portfolio-item > [data-project]")+1,o=$(t).closest("[data-project]").data("project");window.dataLayer.push({event:"gtm-ga-event","gtm-event-category":"project_view","gtm-event-action":n,"gtm-event-label":o,"gtm-event-value":n,"gtm-event-non-interaction":!1}),window.dataLayer.push({event:"gtm-ym-event","gtm-event-category":"","gtm-event-action":"","gtm-event-label":"project_view","gtm-event-non-interaction":!1})})})},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=t.Disclaimer=function(){function e(){n(this,e),this.$container=$(".js-disclaimer"),this.bindToggle(),this.checkHistory()}return o(e,[{key:"bindToggle",value:function(){var e=this;$("html").find(".js-disclaimer-toggler").on("click",function(){e.$container.toggleClass("_toggled")})}},{key:"bindAgree",value:function(){var e=this;$(".js-disclaimer-agree").on("click.cookie",function(){window.localStorage.setItem("cookieAgree",!0),e.$container.hide()})}},{key:"checkHistory",value:function(){window.localStorage.cookieAgree?this.$container.hide():this.bindAgree()}}]),e}();new i},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Form=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(4),s=o(r);t.Form=function(){function e(t){i(this,e),this.$form=$(t),this.$btn=this.$form.find(".js-submit"),this.antispamTimeout,this.popLabels(),this.validate(),this.bindSubmit(),this.bindClose(),this.bindRadioText(),this.disableAutoFill(),this.fileUpload(),this.filterPhone(),this.antispam(),this.bindTextarea(),this.bindDropdown()}return a(e,[{key:"validate",value:function(){new s.default(this.$form)}},{key:"bindSubmit",value:function(){var e=this;this.$form.on("submit",function(t){t.preventDefault(),e.$btn.attr("disabled",!0);var n=e.$form.find("._error, ._notvalidated");n.length&&n.removeClass("_notvalidated").addClass("_error"),$('[name="with_errors"]',e.$form).val(!!n.length),e.sendForm()})}},{key:"sendForm",value:function(){var e=this;this.$form.ajaxSubmit({url:this.$form.attr("action"),dataType:"json",type:this.$form.attr("method")||"GET",cache:!1,success:function(t){var n=e.$form.find("._error, ._notvalidated").eq(0).parent();return n.length?($("html, body").stop().animate({scrollTop:n.offset().top-45},300),void e.$btn.removeAttr("disabled")):void(t.success?(e.resetForm(),e.$form.removeClass("_error").addClass("_success")):(e.$form.removeClass("_success").addClass("_error"),e.$btn.removeAttr("disabled")))},error:function(){e.$form.removeClass("_success").addClass("_error"),console.log("Ошибка отправки формы"),e.$btn.removeAttr("disabled")}}),$(document).trigger("ga:newproject:send")}},{key:"bindClose",value:function(){var e=this;this.$form.find(".js-form-ok").on("click",function(t){t.preventDefault(),e.$form.removeClass("_success _error")})}},{key:"bindRadioText",value:function(){var e=this;this.$form.find(".js-radio-text").each(function(t,n){var o=$(n),i=o.closest(".form-radio").find(":radio"),a=i.attr("name");o.on("focus",function(){i.click()}),e.$form.find('[name="'+a+'"]').on("click",function(){$(this).closest(".form-radio").find(".js-radio-text").length||o.val("")})})}},{key:"bindTextarea",value:function(){this.$form.find("textarea.js-input").each(function(){var e=$(this),t=e.closest(".js-input-wrap");t.attr("data-textarea-text",""),e.on("input keyup",function(){t.attr("data-textarea-text",e.val()+"_")})})}},{key:"bindDropdown",value:function(){this.$form.find(".js-form-dropdown").each(function(){var e=$(this),t=e.siblings(".js-input"),n=e.find(".js-form-dropdown-current"),o=e.find(".js-form-dropdown-list"),i=o.children();n.on("click",function(){e.toggleClass("_opened",!e.is("._opened")),o.slideToggle()}),e.on("keydown",function(e){32!=e.keyCode&&13!=e.keyCode||(e.preventDefault(),n[0]==e.target&&n.click(),$(e.target).is("[data-value]")&&(n.click(),$(e.target).click()))}),i.on("click",function(){e.removeClass("_opened"),o.slideUp(),n.html($(this).html()),t.val($(this).data("value")).change()})})}},{key:"fileUpload",value:function(){this.$form.find(".js-upload").on("change",function(){var e=$(this),t=e.closest(".js-input-wrap").find(".js-upload-label"),n=e.val(),o=void 0;n.length?(o=n.split("\\").pop()||"",t.text(o),e.addClass("_active"),e.closest(".js-input-wrap").addClass("_active")):(t.text(t.data("text")),e.removeClass("_active"))}),this.$form.find(".js-upload-clear").on("click",function(){$(this).siblings(".js-upload").val("").change()})}},{key:"filterPhone",value:function(){this.$form.find("[data-phone]").on("input",function(){var e=$(this).val().replace(/[^0-9\s()+-]/g,"");$(this).val(e)}),"edge"==Sniff.browser.name&&this.$form.find("[data-phone]").on("blur",function(){$(this).change()})}},{key:"resetForm",value:function(){this.$form[0].reset(),this.$form.find(".js-upload").val("").change().siblings("[data-label]").text(""),this.$form.find("[data-required]").not(":checkbox").addClass("_notvalidated").removeClass("_error"),this.$form.find(":checkbox[data-required]").not(":checked").addClass("_notvalidated"),this.$form.find(".js-submit"),this.$form.find(".js-input-wrap").removeClass("_focused"),this.$form.find(".js-dropdown").trigger("dropdown:reset")}},{key:"popLabels",value:function(){this.$form.find("input.js-input, textarea.js-input").on("input blur",function(){var e=$.trim($(this).val());e.length&&"+7() --"!=e?$(this).closest(".js-input-wrap").addClass("_focused"):$(this).closest(".js-input-wrap").removeClass("_focused")})}},{key:"disableAutoFill",value:function(){this.$form.find('[type="text"], [type="email"], [type="tel"], [type="password"]').attr("autocomplete","new-password")}},{key:"disableIEautocomplete",value:function(){(App.ie||App.edge)&&(window.onbeforeunload=function(){$('form[autocomplete="off"]').each(function(){this.reset()})})}},{key:"antispam",value:function(){var e=this,t=0,n=function(){var e=!1;return(window._phantom||window.callPhantom)&&(e=!0),window.__phantomas&&(e=!0),window.Buffer&&(e=!0),window.emit&&(e=!0),window.spawn&&(e=!0),window.webdriver&&(e=!0),(window.domAutomation||window.domAutomationController)&&(e=!0),e};return!n()&&(this.$form.append('<input type="hidden" name="'+this.$form.data("name")+'" class="js-input-seconds" value="0" />'),clearInterval(this.antispamTimeout),void(this.antispamTimeout=setInterval(function(){t++,e.$form.find(".js-input-seconds").val(t)},1e3)))}}]),e}()},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t){n(this,e),this.form=$(t),this.inputs=this.form.find("input, select, textarea"),this.required=this.form.find("[data-required]"),this.email=this.form.find("[data-email]"),this.minlength=this.form.find("[data-minlength]"),this.fileformat=this.form.find("[data-fileformat]"),this.submitBtn=this.form.find("[data-submit]"),this.messages=window.validateMessages||{required:"Не заполнено поле",minlength:"Не менее %min% символов",email:"Неправильный формат",fileformat:"Недопустимый тип файла",filesize:"Файл должен быть до %max% МБ"},this.form.find("[data-required]").not(":checkbox").addClass("_notvalidated"),this.form.find(":checkbox[data-required]").not(":checked").addClass("_notvalidated"),this.handleChange()}return o(e,[{key:"handleChange",value:function(){var e=this;this.inputs.on("change",function(t){var n=$(t.target);n.is(":checkbox[data-required]")?e.validateRequiredCheckbox(n):n.is("[data-required]")&&e.validateRequired(n),(n.is("[type=email]")||n.is("[data-email]"))&&e.validateEmail(n),n.is("[data-minlength]")&&e.validateMinLength(n),n.is("[data-fileformat]")&&e.validateFileFormat(n),n.removeClass("_notvalidated"),e.calculateErrors()})}},{key:"validateRequired",value:function(e){var t=e.siblings("[data-label]"),n=e.val().replace(/\s/g,"");n.length>0?(e.removeClass("_error"),t.text("")):(e.addClass("_error"),t.text(this.messages.required))}},{key:"validateRequiredCheckbox",value:function(e){if(e.data("required")){var t=$('[data-required="'+e.data("required")+'"]');return void(t.filter(":checked").length?t.removeClass("_error _notvalidated"):e.addClass("_error"))}var n=e.parent().siblings("[data-label]");e.is(":checked")?(e.removeClass("_error"),n.text("")):(e.addClass("_error"),n.text(this.messages.required))}},{key:"validateMinLength",value:function(e){var t=e.siblings("[data-label]"),n=e.data("minlength"),o=$.trim(e.val());if(o.length>=n)e.removeClass("_error"),t.text("");else if(o.length>0){var i=this.messages.minlength.replace("%min%",n);e.addClass("_error"),t.text(i)}else 0==o.length&&e.is(":not([data-required])")&&(e.removeClass("_error"),t.text(""))}},{key:"validateEmail",value:function(e){var t=e.siblings("[data-label]"),n=e.val().replace(/\s/g,"");n.length&&(/(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/i.test(n)?(e.removeClass("_error"),t.text("")):(e.addClass("_error"),t.text(this.messages.email)))}},{key:"validateFileFormat",value:function(e){var t=e.siblings("[data-label]"),n=e.attr("accept").split(","),o=e.val();if(o.length||!e.is("[data-required]")){if(!o.length)return e.removeClass("_error"),void t.text("");var i="."+o.split(".").pop();i=i.toLowerCase(),$.inArray(i,n)>-1?(e.removeClass("_error"),t.text(""),e.is("[data-filesize]")&&this.validateFileSize(e)):(e.addClass("_error"),t.text(this.messages.fileformat))}}},{key:"validateFileSize",value:function(e){var t=e.siblings("[data-label]"),n=+e.data("filesize");if(e[0].files.length){var o=e[0].files[0].size/1024/1024;if(o>n){var i=this.messages.filesize.replace("%max%",n);e.addClass("_error"),t.text(i)}}}},{key:"calculateErrors",value:function(){var e=this.form.find("._error, ._notvalidated").length;e>0||this.submitBtn.removeAttr("disabled")}}]),e}();t.default=i},function(e,t){"use strict";function n(e){var t="";return e=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/),void 0!==e[2]?(t=e[2].split(/[^0-9a-z_\-]/i),t=t[0]):t=e,t}function o(e){return e.match(/(videos|video|channels|\.com)\/([\d]+)/)[2]}Object.defineProperty(t,"__esModule",{value:!0}),t.getYoutubeId=n,t.getVimeoId=o},function(e,t){"use strict";function n(){$(".js-lazyload-video").each(function(){$(this).is(":in-viewport")?$(this)[0].play():$(this)[0].pause()})}document.addEventListener("lazybeforeunveil",function(e){var t=e.target.getAttribute("data-bg");t&&(e.target.style.backgroundImage="url("+t+")")}),requestAnimationFrame(function(){$(".lazyloaded:in-viewport").each(function(){var e=this.getAttribute("data-bg");e&&(this.style.backgroundImage="url("+e+")"),console.log("inv")})}),$(window).on("scroll",n),$(document).on("barba:onEnterCompleted",n)},function(e,t){"use strict";!function(e){function t(e,t){return Math.random()*(t-e)+e}function n(){function e(e){var n=Math.random()>.5?-1:1,i=Math.random()>.5?-1:1,a=t(60,80);Array.prototype.slice.call(o,1).forEach(function(e){var t=new TimelineLite;t.to(e,1.2,{x:n*a*Math.random()+"%",y:i*a*Math.random()+"%",ease:Elastic.easeOut.config(1,.2)}),t.to(e,1.2,{x:"0%",y:"0%",ease:Elastic.easeOut.config(1,.2)},"-=1.1")})}var n=document.querySelectorAll("#component-4")[0],o=document.querySelectorAll("#component-4 .blob"),i=document.querySelector("#filter-goo-4 feGaussianBlur");n.addEventListener("mousemove2",function(e){var t=.6*(e.pageX-n.offsetLeft-n.offsetWidth/2),a=.6*(e.pageY-n.offsetTop-n.offsetHeight/2);TweenLite.to(o[1],4.2,{x:t,y:a,ease:Elastic.easeOut.config(1,.1)}),TweenLite.to(o[2],2.8,{x:t,y:-a,ease:Elastic.easeOut.config(1,.1)}),TweenLite.to(o[3],2.8,{x:-t,y:-a,ease:Elastic.easeOut.config(1,.1)}),TweenLite.to(i,5,{onUpdate:function(){i.setAttribute("x",0)}})}),n.addEventListener("mouseover",e),n.addEventListener("click",e)}var o=/constructor/i.test(window.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window.safari||safari.pushNotification);o&&document.getElementsByTagName("html")[0].classList.add("safari"),!document.querySelectorAll("#component-4")[0]||"edge"==Sniff.browser.name||"firefox"==Sniff.browser.name||"ie"==Sniff.browser.name||o||device.tablet()||device.mobile()||n()}(jQuery)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=t.Nav=function(){function e(){n(this,e),this.root=$(".js-nav"),this.toggler=$(".js-nav-toggler",this.root),this.bind()}return o(e,[{key:"bind",value:function(){var e=this;this.toggler.on("click",function(t){$(t.currentTarget).toggleClass("nav-toggler--on"),e.root.toggleClass("nav--opened"),$("html").toggleClass("site-nav--opened")}),$("html").on("click",".js-nav .js-nav-link, .site-logo .js-nav-link",function(){$(document).trigger("ga:menu:click",$(this))})}}]),e}(),a=new i;t.default=a},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(15),l=o(s),c=n(11),u=o(c),d=n(13),f=o(d),v=n(10),m=o(v),p=n(12),g=o(p),h=n(14),y=o(h),b=function(){function e(){function t(e,t,n){$(e).addClass("fade-out").one("animationend webkitAnimationEnd",function(){window.scrollTo(0,0),$(t).addClass("fade-in").one("animationend webkitAnimationEnd",function(){n()})})}function n(e,t,n){var o=$(".js-transition-curtain"),i=$('<div class="transition-portfolio-contacts">');o.append(i),o.removeClass("transition-curtain--on"),requestAnimationFrame(function(){requestAnimationFrame(function(){o.addClass("transition-curtain--on")})}),clearTimeout(c),c=setTimeout(function(){o.removeClass("transition-curtain--on")},1600),setTimeout(function(){n(),i.addClass("transition-portfolio-contacts-end"),setTimeout(function(){i.remove()},800),window.scrollTo(0,0)},800)}function o(e,t,n){var o=$(".js-transition-curtain"),i=$('<div class="transition-contacts-portfolio">');o.append(i),o.removeClass("transition-curtain--on"),requestAnimationFrame(function(){requestAnimationFrame(function(){o.addClass("transition-curtain--on")})}),clearTimeout(c),c=setTimeout(function(){o.removeClass("transition-curtain--on")},1600),setTimeout(function(){n(),i.addClass("transition-contacts-portfolio-end"),setTimeout(function(){i.remove()},800),window.scrollTo(0,0)},800)}var r=this;i(this,e),this.animating=!1,this.gaIsReady=!1,Barba.Pjax.Dom.wrapperId="page-controller",Barba.Pjax.Dom.containerClass="js-page",Barba.Pjax.Dom.dataNamespace="page";var s={portfolio:{contacts:n},contacts:{portfolio:o},default:t};Barba.Pjax.getTransition=function(){return Barba.BaseTransition.extend({start:function(){var e=this;this.newContainerLoading.then(function(){var t=Barba.Pjax.History.prevStatus().namespace,n=Barba.Pjax.History.currentStatus().namespace;return(s[t]&&s[t][n]||s.default)(e.oldContainer,e.newContainer,e.done.bind(e))})}})};var c=void 0;this.pages={main:new f.default,about:new m.default,portfolio:new l.default,case:new u.default,newproject:new y.default,contacts:new g.default,404:""};var d=function(e){var t={};Barba.BaseView.extend({namespace:e,onEnter:function(){if($("html").addClass("page-"+e),t=r.pages[e]?r.pages[e]:{},t.onEnter&&t.onEnter(),t.getTransitionMap){var n=t.getTransitionMap();Object.keys(n).map(function(e){"object"==a(n[e])?Object.keys(n[e]).map(function(t){s[e]=s[e]||{},s[e][t]=n[e][t]}):s[e]=n[e]})}r.updateNav(),r.gaIsReady&&($(document).trigger("ga:dimension"),$(document).trigger("ga:pageview"))},onEnterCompleted:function(){t.onEnterCompleted&&t.onEnterCompleted(),$(document).trigger("barba:onEnterCompleted",t)},onLeave:function(){$("html").removeClass("page-"+e),t.onLeave&&t.onLeave()},onLeaveCompleted:function(){t.onLeaveCompleted&&t.onLeaveCompleted(),$(".js-nav-toggler").removeClass("nav-toggler--on"),$(".js-nav").removeClass("nav--opened"),$("html").removeClass("site-nav--opened")}}).init()};for(var v in this.pages)d(v);$(document).on("click","a",function(e){if(window.location.href==e.currentTarget.href)return!1}),Barba.Dispatcher.on("linkClicked",function(e){$(e).closest("ul").find("a").removeClass("active"),$(e).addClass("active")}),Barba.Dispatcher.on("newPageReady",function(e,t,n,o){var i=$("<head />").html($.parseHTML(o.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0],document,!0)),a=["meta[name='keywords']","meta[name='description']","meta[property^='og']","meta[name^='twitter']","meta[itemprop]","link[itemprop]","link[rel='prev']","link[rel='next']","link[rel='canonical']"].join(",");$("head").find(a).remove(),i.find(a).appendTo("head")}),Barba.Pjax.start(),$(document).on("ga:ready",$.proxy(this.gaReady,this))}return r(e,[{key:"gaReady",value:function(){this.gaIsReady=!0,$(document).trigger("ga:dimension")}},{key:"updateNav",value:function(){$(".js-nav-link").removeClass("active current").each(function(e,t){document.location.href.indexOf(t.href)>=0&&$(t).addClass("active"),document.location.href==t.href&&$(t).addClass("current")})}}]),e}();t.default=b},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){n(this,e)}return o(e,[{key:"onEnter",value:function(){if(this.page=$('.js-page[data-page="about"]'),this.page.length){this.videoWrap=$(".js-main-bg",this.page),$(document).on("win:resizeStart",$.proxy(this.videoRender,this));var e=$(".js-accordion-head");e.click(function(e){var t=$(e.currentTarget),n=t.closest(".js-accordion");n.toggleClass("_open"),n.is("._open")&&$(document).trigger("ga:accordeon:open",n)});var t=$(".js-about-logos-grid-filtered"),n=$(".js-about-logo-filter"),o=$(".js-about-logo"),i=$(".js-about-logo-default"),a=void 0,r=2;o.filter(":not(.js-about-logo-default)").addClass("_hidden"),n.click(function(e){var s=$(e.currentTarget),l=s.attr("data-val");r=window.innerWidth>=768&&window.innerWidth<1366?4:window.innerWidth>=1366?5:2,s.hasClass("_active")?(s.removeClass("_active"),a=i):(n.removeClass("_active"),s.addClass("_active"),a=o.filter('[data-filter="'+l+'"]'),$(document).trigger("ga:aboutlogofilter:click",s)),t.height(t.height()),o.addClass("_hidden"),setTimeout(function(){a.removeClass("_hidden"),t.height(Math.ceil(a.length/r)*a.eq(0).outerHeight(!0))},100)});var s=new Swiper(".js-case-main-slider",{loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},lazy:{loadPrevNext:!0},on:{tap:function(){s.slideNext()}}})}}},{key:"onEnterCompleted",value:function(){this.page.find("img[data-lazy]").each(function(){this.src=$(this).data("lazy")})}},{key:"onLeave",value:function(){}},{key:"onLeaveCompleted",value:function(){for(var e in this)delete this[e]}}]),e}();t.default=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t){function o(e,t,n){return $('[data-page-transition="portfolio-subcategory"] .active',t).length?void i(e,t,n):$('[data-page-transition="portfolio-category"] .active',t).length?void a(e,t,n):void a(e,t,n)}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};$(".portfolio-list",e).addClass("on-enter"),$(".portfolio-list",t).addClass("on-enter"),setTimeout(function(){$(".portfolio-list",t).removeClass("on-enter"),n()},800)}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};$(".portfolio-header",e).addClass("on-enter"),$(".portfolio-header",t).addClass("on-enter"),setTimeout(function(){$(".portfolio-header",t).removeClass("on-enter"),n()},800),i(e,t)}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};$(e).addClass("transition-to-portfolio").one("animationend webkitAnimationEnd",function(){n()})}var s=this;n(this,e),this.root=t,this.transitionMap={case:{case:o,portfolio:r}},$(".js-case-video-play").one("click",function(e){var t=$(e.target).closest(".js-case-video"),n=t.data("url");if(n.indexOf("youtube.com/")!==-1||n.indexOf("youtu.be/")!==-1){var o=s.youtubeID(n);n="https://www.youtube.com/embed/"+o}t.addClass("_active").append('<iframe src="'+n+'?title=0&byline=0&portrait=0&autoplay=1" width="100%" height="100%" frameborder="0" allowfullscreen></iframe>')}),document.addEventListener("lazybeforeunveil",function(e){var t=e.target.getAttribute("data-bg");t&&(e.target.style.backgroundImage="url("+t+")")})}return o(e,[{key:"getTransitionMap",value:function(){return this.transitionMap}},{key:"onEnter",value:function(){var e=Barba.HistoryManager.prevStatus();e&&$('.js-page[data-page="case"] .js-case-close').attr("href",e.url),$('.js-page[data-page="case"]').on("click",function(e){$(e.target).closest(".js-case-close").length||$(e.target).closest(".case-wrap").length||$(".js-case-close")[0].click()}),window.scrollTo(0,0)}},{key:"onEnterCompleted",value:function(){var e=new Swiper(".js-case-main-slider",{loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},lazy:{loadPrevNext:!0},on:{tap:function(){e.slideNext()}}})}},{key:"onLeave",value:function(){}},{key:"onLeaveCompleted",value:function(){}},{key:"gaReady",value:function(){}},{key:"youtubeID",value:function(e){var t="";return e=e.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/),void 0!==e[2]?(t=e[2].split(/[^0-9a-z_\-]/i),t=t[0]):t=e,t}}]),e}();t.default=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){n(this,e),this.$html=$("html")}return o(e,[{key:"onEnter",value:function(){var e=this;this.$policyPopup=this.$html.find(".js-policy-popup"),this.$html.on("click.policy",".js-open-policy-popup",function(t){t.preventDefault(),e.$html.addClass("policy-popup-visible")}),this.$html.on("click.policy",".js-close-policy-popup",function(){e.$html.removeClass("policy-popup-visible")}),this.$html.on("click.policy",".js-policy-popup",function(t){$(t.target).closest(".js-policy-popup-inner").length||e.$html.removeClass("policy-popup-visible")})}},{key:"onEnterCompleted",value:function(){}},{key:"onLeave",value:function(){this.$html.off("click.policy"),this.$html.removeClass("policy-popup-visible")}},{key:"onLeaveCompleted",value:function(){}}]),e}();t.default=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){n(this,e)}return o(e,[{key:"onEnter",value:function(){this.page=$('.js-page[data-page="main"]'),this.page.length&&(this.videoWrap=$(".js-main-bg",this.page),$(document).on("win:resizeStart",$.proxy(this.videoRender,this)))}},{key:"onEnterCompleted",value:function(){this.videoRender(),this.videoPlay()}},{key:"onLeave",value:function(){this.videoStop()}},{key:"onLeaveCompleted",value:function(){$(document).off("win:resizeStart",$.proxy(this.videoRender,this)),$(".site-logo .js-nav-link").length||($(".site-logo .button__bg").parent().wrap('<a class="js-nav-link" href="/" data-yacounter="menu_logo" data-alias="Logo"></a>'),$(".site-logo .js-nav-link").on("click",function(){$(document).trigger("ga:menu:click",$(this))}));for(var e in this)delete this[e]}},{key:"videoRender",value:function(){var e=this.videoWrap.data("video");e&&$("body").width()>1024?this.video?this.video.play():(this.video=$('<video loop muted autoplay><source src="'+e+'" type="video/mp4"></video>')[0],
this.videoWrap.append(this.video)):(this.videoWrap.empty(),delete this.video)}},{key:"videoPlay",value:function(){this.video&&this.video.play()}},{key:"videoStop",value:function(){this.video&&this.video.pause()}}]),e}();t.default=i},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(3),r=function(){function e(){o(this,e),this.page=$('.js-page[data-page="newproject"]'),!this.page.length}return i(e,[{key:"onEnter",value:function(){$("html").find(".js-form").each(function(){new a.Form(this)});var e=Barba.HistoryManager.prevStatus();e&&$("html").find(".js-newproject-close").attr("href",e.url)}},{key:"onEnterCompleted",value:function(){}},{key:"onLeave",value:function(){}},{key:"onLeaveCompleted",value:function(){}}]),e}();t.default=r},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(16),s=o(r),l=function(){function e(t){function n(e,t,n){return $('[data-page-transition="portfolio-subcategory"] .active',t).length?void o(e,t,n):$('[data-page-transition="portfolio-category"] .active',t).length?void a(e,t,n):void a(e,t,n)}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};$(".portfolio-list",e).addClass("on-enter"),$(".portfolio-list",t).addClass("on-enter"),setTimeout(function(){$(".portfolio-list",t).removeClass("on-enter"),n()},800)}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};$(".portfolio-header",e).addClass("on-enter"),$(".portfolio-header",t).addClass("on-enter"),setTimeout(function(){$(".portfolio-header",t).removeClass("on-enter"),n()},800),o(e,t)}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};$(".js-case-portfolio",t).append(e.innerHTML),$(t).addClass("fade-in").one("animationend webkitAnimationEnd",function(){n()})}i(this,e),this.root=t,this.menuScroll=0,this.subMenuScroll=0,this.transitionMap={portfolio:{portfolio:n,case:r}}}return a(e,[{key:"getTransitionMap",value:function(){return this.transitionMap}},{key:"onEnter",value:function(){$('[data-page="case"]').length||(this.lastScroll=0)}},{key:"onEnterCompleted",value:function(){var e=this;$(".portfolio-nav__list a.active",this.root).parent().each(function(t,n){n.offsetLeft+$(n).width()-$(n).parent()[0].scrollLeft>window.innerWidth&&(e.menuScroll=n.offsetLeft+$(n).width()-window.innerWidth+30)}),$(".portfolio-tags__list a.active",this.root).parent().each(function(t,n){n.offsetLeft+$(n).width()-$(n).parent()[0].scrollLeft>window.innerWidth&&(e.subMenuScroll=n.offsetLeft+$(n).width()-window.innerWidth+30)}),$(".portfolio-nav__list",this.root).each(function(t,n){n.scrollLeft=e.menuScroll}),$(".portfolio-tags__list",this.root).each(function(t,n){n.scrollLeft=e.subMenuScroll}),this.popupVideo=new s.default($(".js-popup-video",this.root)[0]),$(".js-portfolio-showreel-video,.js-portfolio-video").each(function(t,n){var o=$(n),i=o.find("video");o.on("click",function(t){i.length&&o.find("video")[0].pause(),e.popupVideo.open(o.data("video"))}),e.popupVideo.root.on("close",function(){i.length&&o.find("video")[0].play()})}),this.lastScroll&&window.scrollTo(0,this.lastScroll),this.onScroll()}},{key:"onLeave",value:function(){var e=this;this.menuScroll=0,this.subMenuScroll=0,$(".portfolio-nav__list",this.root).each(function(t,n){e.menuScroll=n.scrollLeft}),$(".portfolio-tags__list",this.root).each(function(t,n){e.subMenuScroll=n.scrollLeft}),$(window).off("scrolling.portfolio"),this.popupVideo.destroy(),this.lastScroll=window.pageYOffset,window.scrollTo(0,0);var t=$('[data-page="portfolio"]');t.children().css("transform","translateY(-"+this.lastScroll+"px)")}},{key:"onLeaveCompleted",value:function(){}},{key:"gaReady",value:function(){}},{key:"onScroll",value:function(){function e(){var e=t.height(),i=n.scrollTop();o.each(function(){var t=$(this);if(!t.is("._seen")){var n=t.offset().top,o=t.innerHeight();n<i+e-.3*o&&n+.7*o>i&&($(document).trigger("ga:portfolio:seen",t),t.addClass("_seen"))}})}var t=$(window),n=$("html"),o=$("html").find(".portfolio-item__img, .portfolio-item__video");o.removeClass("_seen"),t.off("scrolling.portfolio").on("scrolling.portfolio",function(){e()}),e(),$(document).on("ga:ready",function(){e()})}}]),e}();t.default=l},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(5),r=function(){function e(t){o(this,e),this.root=$(t),this.closeBtn=$(".js-popup-video-close",this.root),this.content=$(".js-popup-video-content",this.root),this.init()}return i(e,[{key:"init",value:function(){this.closeBtn.on("click",$.proxy(this.close,this))}},{key:"open",value:function(e){$("body").css("padding-right",window.innerWidth-$("body").width()),$("html").addClass("_popup-video-open"),this.content.html(this.getVideoHtml(e))}},{key:"close",value:function(){var e=this;$("html").removeClass("_popup-video-open"),$("body").css("padding-right",""),this.root.trigger("close",this.root),setTimeout(function(){e.content.empty()},400)}},{key:"getVideoHtml",value:function(e){var t=void 0;return e.indexOf("youtube.com/")===-1&&e.indexOf("youtu.be/")===-1||(t=(0,a.getYoutubeId)(e),e="https://www.youtube.com/embed/"+t),e.indexOf("vimeo.com/")!==-1&&(t=(0,a.getVimeoId)(e),e="https://player.vimeo.com/video/"+t),'<div class="popup-video-wrap"><iframe src="'+e+'?title=0&byline=0&portrait=0&autoplay=1" width="100%" height="100%" frameborder="0" allow="autoplay" allowfullscreen></iframe></div>'}},{key:"destroy",value:function(){this.closeBtn.off("click",$.proxy(this.close,this))}}]),e}();t.default=r}]);
//# sourceMappingURL=script.min.js.map